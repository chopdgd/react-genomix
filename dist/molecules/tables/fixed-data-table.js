import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _defineProperty from"@babel/runtime/helpers/esm/defineProperty";import _classCallCheck from"@babel/runtime/helpers/esm/classCallCheck";import _createClass from"@babel/runtime/helpers/esm/createClass";import _possibleConstructorReturn from"@babel/runtime/helpers/esm/possibleConstructorReturn";import _getPrototypeOf from"@babel/runtime/helpers/esm/getPrototypeOf";import _inherits from"@babel/runtime/helpers/esm/inherits";import React from"react";import{AutoSizer}from"react-virtualized";import{Table}from"fixed-data-table-2";import{get,indexOf,map,sortBy}from"lodash";import update from"immutability-helper";var FixedDataTable=/*#__PURE__*/function(a){function b(a){var c;return _classCallCheck(this,b),c=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,a)),c.onColumnResizeEndCallback=function(a,b){var d=c.state.columnWidths,e=update(d,_defineProperty({},b,{$set:a}));c.setState({columnWidths:e});var f=c.props.onColumnResize;f&&f(e)},c.onColumnReorderEndCallback=function(a){var b=c.state.columnOrder.filter(function(b){return b!==a.reorderColumn});if(a.columnAfter){var e=b.indexOf(a.columnAfter);b.splice(e,0,a.reorderColumn)}else b.push(a.reorderColumn);c.setState({columnOrder:b});var d=c.props.onColumnReorder;d&&d(b)},c.state={columnWidths:a.columnWidths,columnOrder:a.columnOrder},c}return _inherits(b,a),_createClass(b,[{key:"render",value:function n(){var a=this,b=this.props,c=b.columnOrder,d=b.columnWidths,e=b.children,f=b.fixedColumns,g=b.onColumnResize,h=b.onColumnReorder,i=b.maxHeight,j=_objectWithoutProperties(b,["columnOrder","columnWidths","children","fixedColumns","onColumnResize","onColumnReorder","maxHeight"]),k=[];React.Children.map(e,function(b){var c={order:indexOf(a.state.columnOrder,b.props.columnKey),column:React.cloneElement(b,{key:b.props.columnKey,width:get(a.state,"columnWidths.".concat(b.props.columnKey),""),fixed:f.includes(b.props.columnKey)})};k.push(c)});// Render columns in adjusted order
var l=sortBy(k,["order"]),m=map(l,function(a){return a.column});return React.createElement(AutoSizer,{disableHeight:!0},function(b){var c=b.width;return React.createElement(Table,Object.assign({className:"genomix fixed-data table",width:c,onColumnResizeEndCallback:a.onColumnResizeEndCallback,onColumnReorderEndCallback:a.onColumnReorderEndCallback,maxHeight:i},j),m)})}}],[{key:"getDerivedStateFromProps",value:function e(a,b){var c=a.columnWidths,d=a.columnOrder;return c!==b.columnWidths||d!==b.columnOrder?{columnWidths:c,columnOrder:d}:null}}]),b}(React.Component);FixedDataTable.defaultProps={fixedColumns:[],maxHeight:1200};export default FixedDataTable;