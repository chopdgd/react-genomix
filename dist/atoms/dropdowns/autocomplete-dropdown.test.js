import React from"react";import ReactDOM from"react-dom";import{shallow}from"enzyme";import{AutoCompleteDropDown}from"../../index";describe("Test AutoCompleteDropDown",function(){var a="http://api.test.com/?search=",b="searchTerm",c="".concat(a).concat(b),d=jest.fn();d.mockReturnValue(c);var e=React.createElement(AutoCompleteDropDown,{name:"test",endpoint:a,searchAction:d,options:[]});it("renders without crashing",function(){var a=document.createElement("div");ReactDOM.render(e,a)}),it("default state is set correctly",function(){var a=shallow(e);expect(a.instance().state.loading).toEqual(!1)}),it("componentWillReceiveProps correctly sets loading correctly",function(){var a=shallow(e);expect(a.instance().state.loading).toEqual(!1),a.setProps({loading:!1}),expect(a.instance().state.loading).toEqual(!1),a.setProps({loading:!0}),expect(a.instance().state.loading).toEqual(!0),a.setProps({loading:!1}),expect(a.instance().state.loading).toEqual(!1)}),it("onSearchChange sets loading = true",function(){var a=shallow(e),c=a.instance(),d=jest.spyOn(c,"setState"),f={searchQuery:b};a.props().onSearchChange({target:f},f),expect(d).toHaveBeenCalledWith({loading:!0})}),it("onSearchChange calls searchAction after timeout",function(){jest.useFakeTimers();var a=shallow(e),f={searchQuery:b};a.props().onSearchChange({target:f},f),expect(setTimeout).toHaveBeenCalledTimes(1),expect(setTimeout).toHaveBeenLastCalledWith(expect.any(Function),750),expect(d).toHaveBeenCalledTimes(0),jest.runAllTimers(),expect(d).toHaveBeenCalledTimes(1),expect(d).toHaveBeenLastCalledWith(c)})});